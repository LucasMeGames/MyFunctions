<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>1L Select</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
        *:has(.form-select, .form-control) {
            position: relative;
        }

        input[list] + div[list] {
            display: none;
            position: absolute;
            width: 100%;
            max-height: 200px;
            overflow-y: auto;
            border-top: none;
            border-radius: 0 0 .375rem .375rem;
            z-index: 100;
            border: var(--bs-border-width) var(--bs-border-style) #86b7fe;
            box-shadow: 0px 3px 0 0.25rem rgb(13 110 253 / 25%);
            /* backdrop-filter: blur(3px);*/
            background: white;
        }

        input[list] + div[list] option {
            display: block;
            padding: 7px 5px 7px 20px;
            color: #414141;
            /*color: #101010;
            text-shadow: black 0 0 3px;*/
            font-size: 1rem;
            cursor: pointer;
        }

        input[list] + div[list] option:not(:last-child) {
            border-bottom: 1px solid #414141;
        }

        input[list] + div[list] option:hover {
            background: rgba(104, 123, 143, 0.2);
        }

        .form-control[list]:has(+ div[list][style*=block]), .form-select[list]:has(+ div[list][style*=block]) {
            border-radius: .375rem .375rem 0 0;
        }

        label:has(div[list]) {
            position: relative;
        }


    </style>
</head>
<body>
<main class="container my-2">
    <div class="card">
        <div class="card-header">
            <h3>1L Select</h3></div>
        <div class="card-body">
        <h2>Como funciona?</h2>
        <p>Ele substituí o datalist padrão do navegador por um datalist feito com HTML e CSS, usando jquery</p>
        <p> Fato interessante: É possível ver comentários quando clica nos input (nesse caso os comentários que eu deixei como opção)</p>
        <div class="card text-bg-secondary">
            <div class="card-header">Exemplo com Input (Text, Number, ETC.)</div>
            <div class="m-2">
                <label class="" for="input1">Exemplo de input 1</label>
                <input class="form-control" id="input1" placeholder="Clique e escreva..." list="lista1"/>
                <div list="lista1">
                    <option>Opção 1</option>
                    <option>Ao Clicar na opção</option>
                    <option>Ela vai preencher automaticamente</option>
                </div>
            </div>
            <br>
            <div class="m-2">
                <div class="form-floating">
                    <input class="form-control" id="input2" placeholder="Clique e escreva..." list="lista2"/>
                    <div list="lista2">
                        <option>Se adapta a qualquer tipo de input</option>
                        <option>e também é facilmente configurável</option>
                        <option>Através do CSS e Javascript</option>
                    </div>
                    <label class="text-muted" for="input2">Exemplo de input 2</label>
                </div>

            </div>
        </div>
        <p>
            Exemplo com explicações de como aplicar :
        </p>

        <pre>
            <code>
                <br/>
                <span>&lt;div class="m-2"&gt;</span>
                    <span>&lt;label class="" for="input1"&gt;Exemplo de input 1&lt;/label&gt;</span>
                    <span>&lt;<span class="text-primary fw-bold text-decoration-underline">input</span> class="<span class="text-success fw-bold text-decoration-underline">form-control</span>" id="input1" placeholder="Clique e escreva..." <span class="text-info fw-bold text-decoration-underline">list="lista1"</span>/&gt;</span>
                    <span>&lt;<span class="text-danger fw-bold text-decoration-underline">div</span> <span class="text-info fw-bold text-decoration-underline">list="lista1"</span>&gt;</span>
                        <span>&lt;<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>Op&ccedil;&atilde;o 1<span>&lt;/<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>
                        <span>&lt;<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>Ao Clicar na op&ccedil;&atilde;o<span>&lt;/<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>
                        <span>&lt;<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>Ela vai preencher automaticamente<span>&lt;/<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>
                    <span>&lt;/<span class="text-danger fw-bold text-decoration-underline">div</span>&gt;</span>
                <span>&lt;/div&gt;</span>
            </code>
            Os códigos em destaque são obrigatórios. E o "Datalist" Deverá acompanhar obrigatoriamente em seguida do input.
        </pre>

        <br>
        <p>
            Também é possível usar como select. Essa parte ainda está em desenvolvimento, mas já está funcionando...
            é importante usar a classe <var>.form-select</var>, e também deixar o input com o atributo <var>ReadOnly</var>
        </p>
        <div class="card text-bg-secondary">
            <div class="card-header">Exemplo Select</div>
            <div class="m-2">
                <label class="" for="select1">Exemplo select 1</label>
                <input class="form-select" id="select1" placeholder="Clique e escreva..." list="lista3" readonly/>
                <div list="lista3">
                    <option>Lembrando que não usamos <var>select</var> e sim <var>input</var>.</option>
                    <option>E para aplicar-lo basta seguir os passos do anteriores, só mudando a class do input</option>
                    <option>de <var>.form-control</var> para <var>.form-select</var></option>
                </div>
            </div>
            <br>
            <div class="m-2">
                <div class="form-floating">
                    <input class="form-select" id="select2" placeholder="Clique e escreva..." list="lista4" readonly>
                    <div list="lista4">
                        <option>Test</option>
                        <option>test2</option>
                        <option>asfasdf</option>
                        <option>boanot</option>
                    </div>
                    <label class="text-muted" for="select2">Exemplo select 2</label>
                </div>

            </div>
        </div>
        <p>Segue abaixo o exemplo de dois códigos usando select</p>
        <pre>
    <code>
        <span>&lt;div class="m-2"&gt;</span>
            <span>&lt;label class="" for="select1"&gt;Exemplo de select&lt;/label&gt;</span>
            <span>&lt;<span class="text-primary fw-bold text-decoration-underline">input</span> class="<span class="text-success fw-bold text-decoration-underline">form-select</span>" id="select1" placeholder="Clique e escreva..." <span class="text-info fw-bold text-decoration-underline">list="lista1"</span> <span class="text-danger text-decoration-underline fw-bold">ReadOnly</span>/&gt;</span>
            <span>&lt;<span class="text-danger fw-bold text-decoration-underline">div</span> <span class="text-info fw-bold text-decoration-underline">list="lista1"</span>&gt;</span>
                <span>&lt;<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>Op&ccedil;&atilde;o 1<span>&lt;/<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>
                <span>&lt;<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>Ao Clicar na op&ccedil;&atilde;o<span>&lt;/<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>
                <span>&lt;<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>Ela vai preencher automaticamente<span>&lt;/<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>
            <span>&lt;/<span class="text-danger fw-bold text-decoration-underline">div</span>&gt;</span>
        <span>&lt;/div&gt;</span>
        <br/>
        <span>&lt;div class="m-2"&gt;</span>
            <span>&lt;label class="" for="select2"&gt;Exemplo de select&lt;/label&gt;</span>
            <span>&lt;<span class="text-primary fw-bold text-decoration-underline">input</span> class="<span class="text-success fw-bold text-decoration-underline">form-select</span>" id="input1" placeholder="Clique e escreva..." <span class="text-info fw-bold text-decoration-underline">list="lista1"</span> <span class="text-danger text-decoration-underline fw-bold">ReadOnly</span>/&gt;</span>
            <span>&lt;<span class="text-danger fw-bold text-decoration-underline">div</span> <span class="text-info fw-bold text-decoration-underline">list="lista1"</span>&gt;</span>
                <span>&lt;<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>Op&ccedil;&atilde;o 1<span>&lt;/<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>
                <span>&lt;<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>Ao Clicar na op&ccedil;&atilde;o<span>&lt;/<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>
                <span>&lt;<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>Ela vai preencher automaticamente<span>&lt;/<span class="text-danger fw-bold text-decoration-underline">option</span>&gt;</span>
            <span>&lt;/<span class="text-danger fw-bold text-decoration-underline">div</span>&gt;</span>
        <span>&lt;/div&gt;</span>
    </code>
    Os códigos em destaque são obrigatórios. E o "Datalist" Deverá acompanhar obrigatoriamente em seguida do input.
        </pre>
        <h3>Notas Finais</h3>
        <ul>
            <li>É importante que as listas não tenham o mesmo valor no <var>list</var></li>
            <li>Você tem total direito para editar e usar, desde que deixe os créditos dentro do código ou em uma área própria</li>
            <li>Você pode ajudar entrando em contato comigo atráves do whatsapp: <a href="tel:+5592985896260"><i class="fab fa-whatsapp"></i> clicando aqui</a></li>
        </ul>
    </div>
        <div class="card-footer">
            <a class="btn btn-primary" href="1LSelect.zip" download=""><i class="fas fa-download"></i> Baixar Dist (Requer Bootstrap + Jquery)</a>
        </div>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
<script src="https://kit.fontawesome.com/150f2cafcc.js" crossorigin="anonymous"></script>
<script defer>
    $(() => {
        $(document).on("keydown", 'input[list]', function (event) {
            if (event.key === "Enter") {
                event.preventDefault();
                return false;
            }
        });
        $(document).on('blur', 'input[list]', function (event) {
            event.preventDefault();
            const list = $(this).attr('list');
            setTimeout(function () {
                $('div[list=' + list + ']').slideUp(100);
            }, 100);
        })
        $(document).on('click', 'input[list]', function (event) {
            event.preventDefault();
            const str = $(this).val();
            const list = $(this).attr('list');

            $('input.form-control+div[list=' + list + '] option').each((i, e) => {
                if ($(e).html().toLowerCase().indexOf(str.toLowerCase()) < 0) {
                    $(e).hide();
                }
            })
            $('div[list=' + list + ']').slideToggle(200);
            $(this).focus();
        })
        $(document).on('click', 'div[list] option', function (event) {
            event.preventDefault();
            const list = $(this).parent().attr('list');
            const item = $(this).html();
            if ($(this).attr("value")) {
                $('input[list=' + list + ']').val($(this).attr("value"));
            } else {
                $('input[list=' + list + ']').val(item);
            }
            $('div[list=' + list + ']').slideUp(100);
        })
        $(document).on('keyup', 'input[list]', function (event) {

            let str;
            event.preventDefault();
            event.stopPropagation();
            const list = $(this).attr('list');
            const divList = $('div[list=' + list + ']');
            if (event.key === "Escape") { // esc
                $(divList).slideUp(200);
                $(this).focus();
            } else if (event.key === "Enter") { // enter
                if ($('input.form-control+div[list=' + list + '] option:visible').length == 1) {
                    str = $('div[list=' + list + '] span:visible').html();
                    $('input[list=' + list + ']').val(str);
                    $('div[list=' + list + ']').slideUp(100);
                }
                return false;
            } else if (event.key === "Tab") { // tab
                $('div[list]').slideUp();
            } else {
                $('div[list=' + list + ']').slideDown(100);
                str = $(this).val();
                let found = false;
                $('input.form-control+div[list=' + list + '] option').each(function () {
                    if ($(this).html().toLowerCase().indexOf(str.toLowerCase()) < 0) {
                        $(this).slideUp(200);
                    } else {
                        $(this).slideDown(200);
                        found = true;
                    }
                })
                if (found) {
                    $('input.form-control+div[list=' + list + ']').slideDown();
                } else {
                    $('input.form-control+div[list=' + list + ']').slideUp();
                }
            }
        })
    })
</script>
</body>
</html>